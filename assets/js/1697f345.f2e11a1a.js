"use strict";(self.webpackChunkmy_website_03=self.webpackChunkmy_website_03||[]).push([[4444],{3905:function(e,l,n){n.d(l,{Zo:function(){return p},kt:function(){return y}});var t=n(7294);function a(e,l,n){return l in e?Object.defineProperty(e,l,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[l]=n,e}function s(e,l){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);l&&(t=t.filter((function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable}))),n.push.apply(n,t)}return n}function r(e){for(var l=1;l<arguments.length;l++){var n=null!=arguments[l]?arguments[l]:{};l%2?s(Object(n),!0).forEach((function(l){a(e,l,n[l])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(n,l))}))}return e}function o(e,l){if(null==e)return{};var n,t,a=function(e,l){if(null==e)return{};var n,t,a={},s=Object.keys(e);for(t=0;t<s.length;t++)n=s[t],l.indexOf(n)>=0||(a[n]=e[n]);return a}(e,l);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(t=0;t<s.length;t++)n=s[t],l.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var m=t.createContext({}),u=function(e){var l=t.useContext(m),n=l;return e&&(n="function"==typeof e?e(l):r(r({},l),e)),n},p=function(e){var l=u(e.components);return t.createElement(m.Provider,{value:l},e.children)},c={inlineCode:"code",wrapper:function(e){var l=e.children;return t.createElement(t.Fragment,{},l)}},i=t.forwardRef((function(e,l){var n=e.components,a=e.mdxType,s=e.originalType,m=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),i=u(n),y=a,d=i["".concat(m,".").concat(y)]||i[y]||c[y]||s;return n?t.createElement(d,r(r({ref:l},p),{},{components:n})):t.createElement(d,r({ref:l},p))}));function y(e,l){var n=arguments,a=l&&l.mdxType;if("string"==typeof e||a){var s=n.length,r=new Array(s);r[0]=i;var o={};for(var m in l)hasOwnProperty.call(l,m)&&(o[m]=l[m]);o.originalType=e,o.mdxType="string"==typeof e?e:a,r[1]=o;for(var u=2;u<s;u++)r[u]=n[u];return t.createElement.apply(null,r)}return t.createElement.apply(null,n)}i.displayName="MDXCreateElement"},995:function(e,l,n){n.r(l),n.d(l,{assets:function(){return p},contentTitle:function(){return m},default:function(){return y},frontMatter:function(){return o},metadata:function(){return u},toc:function(){return c}});var t=n(7462),a=n(3366),s=(n(7294),n(3905)),r=["components"],o={id:5,title:"MySQL\u5b89\u88c5\u53ca\u914d\u7f6e"},m="\u5b89\u88c5MySQL",u={unversionedId:"01 \u5b89\u88c5\u73af\u5883\u51c6\u5907/\u524d\u7f6e\u8f6f\u4ef6\u5b89\u88c5/5",id:"01 \u5b89\u88c5\u73af\u5883\u51c6\u5907/\u524d\u7f6e\u8f6f\u4ef6\u5b89\u88c5/5",title:"MySQL\u5b89\u88c5\u53ca\u914d\u7f6e",description:"\u67e5\u770bcpu\u6784\u67b6\uff1a",source:"@site/docs\\01 \u5b89\u88c5\u73af\u5883\u51c6\u5907\\\u524d\u7f6e\u8f6f\u4ef6\u5b89\u88c5\\03 mysql\u5b89\u88c5\u53ca\u914d\u7f6e.md",sourceDirName:"01 \u5b89\u88c5\u73af\u5883\u51c6\u5907/\u524d\u7f6e\u8f6f\u4ef6\u5b89\u88c5",slug:"/01 \u5b89\u88c5\u73af\u5883\u51c6\u5907/\u524d\u7f6e\u8f6f\u4ef6\u5b89\u88c5/5",permalink:"/01 \u5b89\u88c5\u73af\u5883\u51c6\u5907/\u524d\u7f6e\u8f6f\u4ef6\u5b89\u88c5/5",draft:!1,tags:[],version:"current",frontMatter:{id:"5",title:"MySQL\u5b89\u88c5\u53ca\u914d\u7f6e"},sidebar:"tutorialSidebar",previous:{title:"http\u670d\u52a1",permalink:"/01 \u5b89\u88c5\u73af\u5883\u51c6\u5907/\u524d\u7f6e\u8f6f\u4ef6\u5b89\u88c5/4"},next:{title:"OpenSSL\u5347\u7ea7",permalink:"/01 \u5b89\u88c5\u73af\u5883\u51c6\u5907/\u524d\u7f6e\u8f6f\u4ef6\u5b89\u88c5/6"}},p={},c=[{value:"aarch64 \u6784\u67b6",id:"aarch64-\u6784\u67b6",level:2},{value:"1. \u5b89\u88c5\u5305\u4e0b\u8f7d",id:"1-\u5b89\u88c5\u5305\u4e0b\u8f7d",level:3},{value:"2.\u5b89\u88c5\u4f9d\u8d56\u9879",id:"2\u5b89\u88c5\u4f9d\u8d56\u9879",level:3},{value:"3.\u914d\u7f6eMySQL",id:"3\u914d\u7f6emysql",level:3},{value:"4.\u914d\u7f6e\u8d26\u53f7",id:"4\u914d\u7f6e\u8d26\u53f7",level:3},{value:"X86_64\u6784\u67b6",id:"x86_64\u6784\u67b6",level:2},{value:"1. \u5b89\u88c5\u5305\u4e0b\u8f7d",id:"1-\u5b89\u88c5\u5305\u4e0b\u8f7d-1",level:3},{value:"2 \u5b89\u88c5MySQL\u6240\u9700\u4f9d\u8d56\u9879",id:"2-\u5b89\u88c5mysql\u6240\u9700\u4f9d\u8d56\u9879",level:3},{value:"3 \u5b89\u88c5MySQL-client\u3001server",id:"3-\u5b89\u88c5mysql-clientserver",level:3},{value:"4 \u542f\u52a8MySQL",id:"4-\u542f\u52a8mysql",level:3},{value:"5 \u914d\u7f6eMySQL",id:"5-\u914d\u7f6emysql",level:3}],i={toc:c};function y(e){var l=e.components,n=(0,a.Z)(e,r);return(0,s.kt)("wrapper",(0,t.Z)({},i,n,{components:l,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"\u5b89\u88c5mysql"},"\u5b89\u88c5MySQL"),(0,s.kt)("p",null,"\u67e5\u770bcpu\u6784\u67b6\uff1a"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"lscpu\n")),(0,s.kt)("p",null,"mysql\u53ef\u80fd\u7528\u4e8ehive\u7ec4\u4ef6\u5143\u6570\u636e\u5e93\uff0c\u672c\u96c6\u7fa4\u4efb\u610f\u8282\u70b9\u5b89\u88c5\u5373\u53ef\u3002"),(0,s.kt)("h2",{id:"aarch64-\u6784\u67b6"},"aarch64 \u6784\u67b6"),(0,s.kt)("h3",{id:"1-\u5b89\u88c5\u5305\u4e0b\u8f7d"},"1. \u5b89\u88c5\u5305\u4e0b\u8f7d"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"wget https://redoop-public-1.oss-cn-beijing.aliyuncs.com/redoop/9.1/arm64/share/mysql/mysql-5.7.27-aarch64.tar.gz\n")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"# \u89e3\u538b\u7f29\u5b89\u88c5\u5305\ntar -xvf mysql-5.7.27-aarch64.tar.gz\n")),(0,s.kt)("h3",{id:"2\u5b89\u88c5\u4f9d\u8d56\u9879"},"2.\u5b89\u88c5\u4f9d\u8d56\u9879"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"yum install -y libaio*\n")),(0,s.kt)("h3",{id:"3\u914d\u7f6emysql"},"3.\u914d\u7f6eMySQL"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"# \u79fb\u52a8\u6587\u4ef6\u5230/usr/local/mysql\nmv /usr/local/mysql-5.7.27-aarch64 /usr/local/mysql  \n\n# \u521b\u5efalogs\u76ee\u5f55\nmkdir -p /usr/local/mysql/logs\n\n# \u5efa\u7acb\u8f6f\u8fde\u63a5\nln -sf /usr/local/mysql/my.cnf /etc/my.cnf \n\n# \u5f3a\u5236\u8986\u76d6\u62f7\u8d1d\ncp -rf /usr/local/mysql/extra/lib* /usr/lib64/ \nmv /usr/lib64/libstdc++.so.6 /usr/lib64/libstdc++.so.6.old\nln -s /usr/lib64/libstdc++.so.6.0.24 /usr/lib64/libstdc++.so.6\n\n# \u521b\u5efamysql\u7ec4\ngroupadd mysql     \n# \u521b\u5efamysql\u7528\u6237\u6dfb\u52a0\u5230mysql\u7ec4\nuseradd -g mysql mysql\n# \u5c06/usr/loca/mysql\u76ee\u5f55\u5305\u542b\u6240\u6709\u7684\u5b50\u76ee\u5f55\u548c\u6587\u4ef6\uff0c\u6240\u6709\u8005\u6539\u53d8\u4e3aroot,\u6240\u5c5e\u7ec4\u6539\u53d8\u4e3amysql\nchown -R mysql:mysql /usr/local/mysql   \n")),(0,s.kt)("p",null,"\u8bbe\u7f6e\u5f00\u673a\u542f\u52a8"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"cp -rf /usr/local/mysql/support-files/mysql.server /etc/init.d/mysqld \nchmod +x /etc/init.d/mysqld\nsystemctl enable mysqld\n")),(0,s.kt)("p",null," \u6dfb\u52a0\u73af\u5883\u53d8\u91cf"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"vim /etc/profile/mysql.sh\n")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"# \u6dfb\u52a0\u4e0b\u9762\u4e24\u884c\u4ee3\u7801\nexport MYSQL_HOME=/usr/local/mysql\nexport PATH=$PATH:$MYSQL_HOME/bin\n")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"source /etc/profile\n")),(0,s.kt)("p",null,"\u521d\u59cb\u5316mysql"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"mysqld --initialize-insecure --user=mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data\n")),(0,s.kt)("p",null,"\u5f00\u542fmysql"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl start mysqld\n")),(0,s.kt)("p",null,"\u67e5\u770b\u72b6\u6001"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl status mysqld\n")),(0,s.kt)("h3",{id:"4\u914d\u7f6e\u8d26\u53f7"},"4.\u914d\u7f6e\u8d26\u53f7"),(0,s.kt)("p",null,"\u7f16\u8f91/usr/local/mysql/my.cnf"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"# \u5728 [mysqld] \u6dfb\u52a0\u8fd9\u4e00\u884c,\u8df3\u8fc7\u5bc6\u7801\u9a8c\u8bc1\nskip-grant-tables \n")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"# \u521b\u5efa\u8f6f\u8fde\u63a5\nln -s /usr/local/mysql/bin/mysql /usr/bin\n# \u767b\u5f55mysql\nmysql -uroot\n")),(0,s.kt)("p",null,"\u66f4\u6539MySQL\u5bc6\u7801\u7b56\u7565"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-mysql"},"set global validate_password_length=4; \nset global validate_password_policy=0; \n")),(0,s.kt)("p",null,"\u8bbe\u7f6e\u7b80\u5355\u597d\u8bb0\u7684\u5bc6\u7801"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-mysql"},'set password=password("123456");\n')),(0,s.kt)("p",null,"\u8fdb\u5165MySQL\u5e93"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-mysql"},"use mysql;\n")),(0,s.kt)("p",null,"\u67e5\u8be2user\u8868"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-mysql"},"select user, host from user;\n")),(0,s.kt)("p",null,"\u4fee\u6539user\u8868\uff0c\u628aHost\u8868\u5185\u5bb9\u4fee\u6539\u4e3a%"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-mysql"},'update user set host="%" where user="root";\n')),(0,s.kt)("p",null,"\u6ce8\u610f\uff0c\u4fee\u6539\u6700\u5927\u8fde\u63a5\u6570"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-mysql"},"set GLOBAL max_connections=1024; \nshow variables like '%max_connections%';\nshow status like 'Threads%';\n")),(0,s.kt)("p",null,"\u5237\u65b0"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-mysql"},"flush privileges;\n")),(0,s.kt)("p",null,"\u9000\u51fa"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-mysql"},"quit;\n")),(0,s.kt)("p",null,"\u7f16\u8f91/usr/local/mysql/my.cnf"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"# \u5728 [mysqld] \u4e0b\u9762\u5220\u9664\u4ee5\u4e0b\u884c\nskip-grant-tables \n")),(0,s.kt)("h2",{id:"x86_64\u6784\u67b6"},"X86_64\u6784\u67b6"),(0,s.kt)("h3",{id:"1-\u5b89\u88c5\u5305\u4e0b\u8f7d-1"},"1. \u5b89\u88c5\u5305\u4e0b\u8f7d"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"wget https://redoop-public-1.oss-cn-beijing.aliyuncs.com/redoop/9.1/x86/share/mysql/mysql-community-common-5.7.16-1.el7.x86_64.rpm\nwget https://redoop-public-1.oss-cn-beijing.aliyuncs.com/redoop/9.1/x86/share/mysql/mysql-community-libs-5.7.16-1.el7.x86_64.rpm\nwget https://redoop-public-1.oss-cn-beijing.aliyuncs.com/redoop/9.1/x86/share/mysql/mysql-community-libs-compat-5.7.16-1.el7.x86_64.rpm\nwget https://redoop-public-1.oss-cn-beijing.aliyuncs.com/redoop/9.1/x86/share/mysql/mysql-community-client-5.7.16-1.el7.x86_64.rpm\nwget https://redoop-public-1.oss-cn-beijing.aliyuncs.com/redoop/9.1/x86/share/mysql/mysql-community-server-5.7.16-1.el7.x86_64.rpm\n")),(0,s.kt)("h3",{id:"2-\u5b89\u88c5mysql\u6240\u9700\u4f9d\u8d56\u9879"},"2 \u5b89\u88c5MySQL\u6240\u9700\u4f9d\u8d56\u9879"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"sudo rpm -ivh mysql-community-common-5.7.16-1.el7.x86_64.rpm \nsudo rpm -ivh mysql-community-libs-5.7.16-1.el7.x86_64.rpm \nsudo rpm -ivh mysql-community-libs-compat-5.7.16-1.el7.x86_64.rpm \n\nyum install libaio-devel.x86_64\nyum install net-tools\nyum install numactl-libs.x86_64\n")),(0,s.kt)("h3",{id:"3-\u5b89\u88c5mysql-clientserver"},"3 \u5b89\u88c5MySQL-client\u3001server"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"sudo rpm -ivh mysql-community-client-5.7.16-1.el7.x86_64.rpm\nsudo rpm -ivh mysql-community-server-5.7.16-1.el7.x86_64.rpm\n")),(0,s.kt)("h3",{id:"4-\u542f\u52a8mysql"},"4 \u542f\u52a8MySQL"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"\u542f\u52a8MySQL")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"sudo systemctl start mysqld\n")),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"\u67e5\u770bMySQL\u5bc6\u7801")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"sudo cat /var/log/mysqld.log | grep password\n")),(0,s.kt)("h3",{id:"5-\u914d\u7f6emysql"},"5 \u914d\u7f6eMySQL"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"+ \u914d\u7f6e\u53ea\u8981\u662froot\u7528\u6237 + \u5bc6\u7801\uff0c\u5728\u4efb\u4f55\u4e3b\u673a\u4e0a\u90fd\u80fd\u767b\u5f55MySQL\u6570\u636e\u5e93\u3002\n+ \u7528\u521a\u521a\u67e5\u5230\u7684\u5bc6\u7801\u8fdb\u5165MySQL\uff08\u5982\u679c\u62a5\u9519\uff0c\u7ed9\u5bc6\u7801\u52a0\u5355\u5f15\u53f7\uff09\nmysql -uroot -p'password'\n")),(0,s.kt)("p",null,"\u8bbe\u7f6e\u590d\u6742\u5bc6\u7801\uff08\u7531\u4e8eMySQL\u5bc6\u7801\u7b56\u7565\uff0c\u6b64\u5bc6\u7801\u5fc5\u987b\u8db3\u591f\u590d\u6742\uff09"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-mysql"},'set password=password("Qs23=zs32");\n')),(0,s.kt)("p",null,"\u66f4\u6539MySQL\u5bc6\u7801\u7b56\u7565"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-mysql"},"set global validate_password_length=4; \nset global validate_password_policy=0; \n")),(0,s.kt)("p",null,"\u8bbe\u7f6e\u7b80\u5355\u597d\u8bb0\u7684\u5bc6\u7801"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-mysql"},'set password=password("123456");\n')),(0,s.kt)("p",null,"\u8fdb\u5165MySQL\u5e93"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-mysql"},"use mysql;\n")),(0,s.kt)("p",null,"\u67e5\u8be2user\u8868"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-mysql"},"select user, host from user;\n")),(0,s.kt)("p",null,"\u4fee\u6539user\u8868\uff0c\u628aHost\u8868\u5185\u5bb9\u4fee\u6539\u4e3a%"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-mysql"},'update user set host="%" where user="root";\n')),(0,s.kt)("p",null,"\u6ce8\u610f\uff0c\u4fee\u6539\u6700\u5927\u8fde\u63a5\u6570"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-mysql"},"set GLOBAL max_connections=1024; \nshow variables like '%max_connections%';\nshow status like 'Threads%';\n")),(0,s.kt)("p",null,"\u5237\u65b0"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-mysql"},"flush privileges;\n")),(0,s.kt)("p",null,"\u9000\u51fa"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-mysql"},"quit;\n")))}y.isMDXComponent=!0}}]);